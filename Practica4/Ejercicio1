/* Suponga que N clientes llegan a la cola de un banco y que serán atendidos por sus
empleados. Analice el problema y defina qué procesos, recursos y canales/comunicaciones
serán necesarios/convenientes para resolverlo. Luego, resuelva considerando las siguientes
situaciones:
a. Existe un único empleado, el cual atiende por orden de llegada.
b. Ídem a) pero considerando que hay 2 empleados para atender, ¿qué debe
modificarse en la solución anterior?
c. Ídem b) pero considerando que, si no hay clientes para atender, los empleados
realizan tareas administrativas durante 15 minutos. ¿Se puede resolver sin usar
procesos adicionales? ¿Qué consecuencias implicaría? */

// Inciso A
// Un solo empleado atiende a los clientes por orden de llegada

chan Atencion(int);

Process Cliente[id: 0..N-1]{
    send atencion(id);
}

Process Empleado {
    int idAux;
    while(true) {
        receive atencion(idAux);
        // Atender al cliente idAux
    }
}

// Inciso B
// Dos empleados atienden a los clientes por orden de llegada
chan Atencion(int);

Process Cliente[id: 0..N-1]{
    send atencion(id);
}

Process Empleado[id: 0..1] {
    int idAux;
    while(true) {
        receive atencion(idAux);
        // Atender al cliente idAux
    }
}

// Inciso C
// Dos empleados atienden a los clientes por orden de llegada
// Si no hay clientes, realizan tareas administrativas durante 15 minutos

chan Atencion(int);
chan pedido(int);
chan Tarea[2](int);

Process Cliente[id: 0..N-1]{
    send atencion(id);
}

Process Admin{
    int idC; // Id del cliente que pide tarea
    int idE; // Id del empleado que recibe tarea

    while(true){
        recieve(pedido(idC));
        if(empty(Atencion)){
            idC = -1;

        }
        else{
            receive(Atencion(idC));
            send Tarea[idE](idC);
        }
        
    };
}

Process Empleado[id: 0..1] {
    int idAux;
    while(true) {
        send pedido(id);
        receive Tarea[id](idAux);
        if(idAux == -1){
            delay(900)// Realizar tarea administrativa por 15 minutos
        }
        else{
            atender(idAux);
            // Atender al cliente idAux
        }
    }
}